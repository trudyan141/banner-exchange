!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=document.createElement("style");e.textContent='body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}.banner-bottom{padding-bottom:50px}.becComponent .banner-container{padding:12px 16px;border-bottom:1px solid #E6E6E6;max-height:122px}.becComponent .banner-container:last-child{border-bottom:0}.becComponent .banner-link{display:flex;text-decoration:none;width:100%}.becComponent .banner-image{width:96px;height:96px;object-fit:cover;margin-right:16px;border-radius:12px}.becComponent .banner-content-right{display:flex;flex-direction:column;width:100%}.becComponent .banner-content{width:100%}.becComponent .banner-link-title{color:#30323d;font-size:16px;font-style:normal;font-weight:600;line-height:normal;margin-bottom:4px}.becComponent .banner-link-description{color:#77787e;font-size:13px;font-style:normal;font-weight:400;line-height:normal;word-break:break-word;margin-bottom:6px}.becComponent .banner-link-btn{padding:6px 16px;border-radius:50px;border:1px solid #30323D;color:#30323d;font-weight:700;text-align:center;font-size:16px;font-style:normal;font-weight:600;line-height:normal;cursor:pointer}.becComponent .banner-link-btn.active,.becComponent .banner-link-btn:hover,.becComponent .banner-link-btn:active,.becComponent .banner-link-btn:focus{border:1px solid transparent;background:linear-gradient(90deg,#30323d,#77787e);color:#fff}.becComponent .banner-exchange-code{margin-bottom:8px}.becComponent .banner-offer-wall{position:fixed;top:0;left:0;opacity:0;width:100%;height:100%;visibility:hidden;display:flex;justify-content:center;align-items:center;background-color:#00000080;transition:all .3s ease;transition-delay:.3s}.becComponent .banner-offer-wall.show{opacity:1;visibility:visible;z-index:1000}.becComponent .banner-offer-wall .offer-waller-container{padding:0;opacity:0;width:100%;height:88vh;transition-delay:1s;gap:8px;transition:width .3s ease,opacity .3s ease,transform .3s ease;display:flex;justify-content:center;align-items:center;overflow:hidden;max-width:480px;width:480px}@media screen and (max-width: 767px){.becComponent .banner-offer-wall .offer-waller-container{padding:0;height:100svh;width:100%}}.becComponent .banner-offer-wall .ads-list{background:#fff;overflow:auto;margin:0 auto;height:100%;min-width:280px;width:100%}@media screen and (max-width: 767px){.becComponent .banner-offer-wall .ads-list{width:100%;margin:none}}.becComponent .banner-offer-wall .ads-list::-webkit-scrollbar{width:8px;height:8px}.becComponent .banner-offer-wall .ads-list::-webkit-scrollbar-track{background:transparent;border-radius:4px}.becComponent .banner-offer-wall .ads-list::-webkit-scrollbar-thumb{background-color:#e0e0e0;border-radius:4px;border:0px solid #e0e0e0}@media screen and (max-width: 320px){.becComponent .banner-offer-wall .ads-list{height:auto;width:90%;max-width:327px}}.becComponent .banner-offer-wall .offer-header{display:flex;justify-content:space-between;align-items:center;background:#30323d;padding:16px 24px 16px 8px;position:sticky;top:0;text-align:center;justify-content:center;color:#fff;font-size:19px;font-style:normal;font-weight:800;line-height:normal;z-index:1}.header-title{flex-grow:1;text-align:center}.becComponent .close-button{position:absolute;top:14px;right:8px;background:none;border:none;cursor:pointer;padding:0;color:#fff;z-index:1010}.becComponent .close-button svg{width:24px;height:24px;fill:#fff}.info-icon{cursor:pointer;margin-left:8px;position:relative}.tooltip-info{display:none;position:absolute;background-color:#333;color:#fff;padding:8px;border-radius:4px;z-index:1000;margin-top:5px;font-size:12px;left:8px;top:40px;max-width:80%}.tooltip-info:before{content:"";position:absolute;bottom:100%;left:20px;margin-left:-5px;border-width:5px;border-style:solid;border-color:transparent transparent #333 transparent}.info-icon:hover+.tooltip{display:block}.spinner{display:flex;justify-content:center;align-items:center;flex-direction:column}.loader{width:80px;height:80px}\n',document.head.appendChild(e);for(var t,n=[],o=0;o<256;++o)n.push((o+256).toString(16).slice(1));var r=new Uint8Array(16);function i(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(r)}const s={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function a(e,t,o){if(s.randomUUID&&!t&&!e)return s.randomUUID();var r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){o=o||0;for(var a=0;a<16;++a)t[o+a]=r[a];return t}return function(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}(r)}const l="https://click-dev.apps-network.net";console.log("ðŸš€ ~ BACKEND_API_URL:",l);const c=async(e,t={})=>{const n=(()=>{const e=JSON.parse(localStorage.getItem("banner_exchange"));return e?e.auth:null})(),o=t.params?`?${r=t.params,r&&"object"==typeof r?Object.keys(r).map((e=>{const t=r[e];return Array.isArray(t)?t.map((t=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"):`${encodeURIComponent(e)}=${encodeURIComponent(t)}`})).join("&"):""}`:"";var r;const i={"Content-Type":"application/json",...t.headers};n?.access_token&&(i.Authorization=`Bearer ${n.access_token}`);const s={method:t.method||"GET",headers:i,body:t.body?JSON.stringify(t.body):void 0};try{const t=await fetch(`${e}${o}`,s);if(!t.ok){if(401===t.status&&n?.refresh_token)try{console.error("Token refresh failed:",t),localStorage.removeItem("banner_exchange"),window.location.href="/"}catch(a){console.error("Token refresh failed:",a),localStorage.removeItem("banner_exchange"),window.location.href="/"}throw new Error(`HTTP error! Status: ${t.status}`)}const r=t.headers.get("Content-Type");let i;return i=r&&r.includes("application/json")?await t.json():await t.text(),i}catch(l){throw console.error("HTTP request failed:",l),l}},d=l,p={getInventories:e=>`${d}/banners/inventories?wa=${e}`,getAds:`${d}/banners/ads`,callImpress:`${d}/banners/impress`,confirmConversion:`${d}/banners/events`,checkUserConversion:`${d}/banners/events`},m=async(e,t)=>{try{let n={inventory_id:e};return t&&(n={...n,tui:t}),await c(p.getAds,{params:n,method:"GET"})}catch(n){throw console.log(n,"error=>getAds"),n}},h=()=>{const e=document.getElementsByTagName("script");for(let t of e)if(t.src.includes("bec.js"))return t;return null},g=async()=>{try{console.log("ðŸš€ ~ onLoad ~ onLoad:",g),await(async()=>{try{const e=(()=>{let e=sessionStorage.getItem("dmtp_session_id");return e||(e=a(),sessionStorage.setItem("dmtp_session_id",e)),e})();console.log("ðŸš€ ~ onTracking ~ session_id:",e);const t=(()=>{try{let e=a();return sessionStorage.setItem("dmtp_impression_id",e),e}catch(e){console.log("ðŸš€ ~ callImpressionApi ~ error:",e)}})(),n=await new Promise(((e,t)=>{const n=document.createElement("script");n.src="https://telegram.org/js/telegram-web-app.js",n.async=!0,n.onload=()=>{const t=window.Telegram;if(t&&t.WebApp){t.WebApp.ready();const n=t.WebApp?.initDataUnsafe?.user?.id||"";sessionStorage.setItem("dmtp_telegram_user_id",n),e(n||"")}else console.error("Telegram Web App SDK is not available"),e(""),sessionStorage.setItem("dmtp_telegram_user_id","")},n.onerror=()=>{console.error("Failed to load the Telegram Web App SDK"),e(""),sessionStorage.setItem("dmtp_telegram_user_id","")},document?.body?.appendChild(n)})),o=(()=>{const e=h(),t=e?.src;let n;if(t){const e=new URL(t);return n=(e=>encodeURIComponent(e))(new URLSearchParams(e.search).get("walletAddress")),sessionStorage.setItem("dmtp_wallet_address",n),n}return sessionStorage.setItem("dmtp_wallet_address",""),""})(),r=((()=>{const e=h(),t=e?.src;if(!t)return sessionStorage.setItem("dmtp_sdk_app_url",""),"";{new URL(t);let e="https://sdk-web-app.dmtp.tech";sessionStorage.setItem("dmtp_sdk_app_url",e)}})(),await(async(e,t,n,o)=>{try{let r={id:n,wa:e,lang:navigator.language||navigator.languages&&navigator.languages[0],utm_source:"",utm_medium:"",utm_campaign:"",session_id:o||"",tui:t||""};await(async e=>{try{return await c(p.callImpress,{params:e,method:"GET"})}catch(t){throw console.log(t,"error=>callImpress"),t}})(r)}catch(r){throw console.log("ðŸš€ ~ callImpressApi ~ error:",r),r}})(o,n,t,e));return r}catch(e){return console.log("ðŸš€ ~ trackingData ~ error:",e),null}})();const e=new((await Promise.resolve().then((()=>u))).default);console.log("ðŸš€ ~ onLoad ~ becInstance:",e),"undefined"!=typeof window&&(window.TE=e,console.log("ðŸš€ ~ onLoad ~ window.TE:",window.TE))}catch(e){console.log("ðŸš€ ~ Onload ~ error:",e)}};"undefined"!=typeof window&&requestAnimationFrame((()=>{g()}));new Date;Symbol.toStringTag;const f="OFW",u=Object.freeze(Object.defineProperty({__proto__:null,default:class{constructor(){this.inventoryBanners=[],this.isVisibleOfferWallet=!1,this.isVisibleOfferWalletChallenge=!1,this.walletAddress="",this.telegramUserId="",this.impressionId="",this.sessionId="",this.sdkAppUrl="",this.offerWallStyle={},this.bannerStyle={},this.adsBlacklist=[],this.adsListShow=[],this.isFetchingAds=!1,this.hasMoreAds=!0,this.inventoryCurrent=null,this.noDataCount=0,this.container=document.createElement("div"),this.container.className="becComponent",document.body.appendChild(this.container),this.initialize()}configureOfferWallStyle(e){this.offerWallStyle=e||{},this.render()}configureBannerStyle(e){this.bannerStyle=e||{},this.render()}setBlacklistAds(e){this.adsBlacklist=e||[],this.render()}onLoaded(){const e=new CustomEvent("becLoaded",{detail:"onLoaded"});document.dispatchEvent(e)}encodeURL(e){return encodeURIComponent(e)}mapAdsList(e){let t=e.map((e=>{const t=navigator.language||navigator.languages&&navigator.languages[0],n=e.url||"https://dmtp.tech",o=this.encodeURL(n),r=`${l}/banners/click?id=${e.id}&inventory_id=${this.inventoryCurrent?.id}&wa=${this.walletAddress}&url=${o}&lang=${t}&session_id=${this.sessionId}&tui=${this.telegramUserId||""}${this.impressionId?`&impression_id=${this.impressionId}`:""}`,i=e.image_url||"https://tma-demo.dmtp.tech/sdk/te.png";return{...e,description:e.description,bannerLink:r,adImageUrl:i,reward_info:this.inventoryCurrent?.inventory_type===f?this.inventoryCurrent?.reward_info:"Play",rewardDesc:e.reward_info}}));return t=t.filter((e=>e.reward_point>0)),t=t.filter((e=>!this.adsBlacklist.some((t=>t===e.id||t===e.alt)))),t}async createBanners(e,t,n,o,r){let i=[];if(e.length>0)for(let s of e){const e=navigator.language||navigator.languages&&navigator.languages[0];let a=(await m(s.id,n)).items||[];if(0===a.length){const i="https://dmtp.tech",c=this.encodeURL(i),d="https://tma-demo.dmtp.tech/sdk/te.png",p=`default-ad${s.id}`;a=[{id:p,alt:"default ad",image_url:d,url:i,bannerLink:`${l}/banners/click?id=${p}&inventory_id=${s.id}&wa=${t}&url=${c}&lang=${e}&session_id=${r}&tui=${n||""}${o?`&impression_id=${o}`:""}`,adImageUrl:d,reward_info:"Play"}]}a.length>0&&(this.inventoryCurrent=s,a=this.mapAdsList(a),a.forEach((e=>{this.adsListShow.some((t=>t.id===e.id))||this.adsListShow.push(e)}))),i.push({ads:a,inventory:s})}return i}async initBanners(e,t,n,o){console.log("ðŸš€ ~ BEC ~ initBanners ~ walletAddress:",e);try{if(!e)return;this.resetInfiniteScroll();const r=await(async e=>{try{return await c(p.getInventories(e),{method:"GET"})}catch(t){throw console.log(t,"error=>getInventories"),t}})(e),i=r?.items||[],s=await this.createBanners(i,e,t,n,o);return this.inventoryBanners=s,this.render(),s||[]}catch(r){console.log("ðŸš€ ~ BEC ~ initBanners ~ error:",r)}}openLinkTelegram(e){const t=window.Telegram;t&&t.WebApp&&t.WebApp.openLink(e)}async initialize(){try{await this.initData(),this.onLoaded()}catch(e){console.log("ðŸš€ ~ BEC ~ initialize ~ error:",e)}}async initData(){const e=sessionStorage.getItem("dmtp_session_id"),t=sessionStorage.getItem("dmtp_impression_id");let n=sessionStorage.getItem("dmtp_wallet_address");const o=sessionStorage.getItem("dmtp_telegram_user_id"),r=sessionStorage.getItem("dmtp_sdk_app_url");this.walletAddress=n,this.telegramUserId=o,this.impressionId=t,this.sessionId=e,this.sdkAppUrl=r,await this.initBanners(n,o,t,e)}onClickAdEvent(e){const t=new CustomEvent("TEAdClicked",{detail:e});document.dispatchEvent(t)}truncateStringToRowsWithFont(e,t,n,o="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif",r=16,i="normal"){if(t<=0||n<=0)throw new Error("Invalid number of rows or rowWidth.");const s=document.createElement("canvas").getContext("2d"),a=`${i} ${r}px ${o}`;s.font=a;const l="... more",c=s.measureText(l).width;if(1===t){if(s.measureText(e).width<=n)return e;let t=0,o=e.length,r="";for(;t<=o;){const i=Math.floor((t+o)/2),a=e.slice(0,i);s.measureText(a).width+c<=n?(r=a,t=i+1):o=i-1}const i=r.lastIndexOf(" ");return-1!==i&&(r=r.substring(0,i)),r+l}const d=document.createElement("div");d.style.cssText=`\n            position: absolute;\n            visibility: hidden;\n            width: ${n}px;\n            font-size: ${r}px;\n            line-height: 1.2em;\n            word-break: break-word;\n        `,d.textContent=e,document.body.appendChild(d);const p=t*(1.2*r);if(d.offsetHeight<=p)return document.body.removeChild(d),e;let m=0,h=e.length,g="";for(;m<=h;){const t=Math.floor((m+h)/2),n=e.slice(0,t);d.textContent=n+l,d.offsetHeight<=p?(g=n,m=t+1):h=t-1}document.body.removeChild(d);const f=g.lastIndexOf(" ");return-1!==f&&(g=g.substring(0,f)),g+l}renderAds(e,t){return e.map((e=>{const n=document.createElement("div");n.className="banner-container",n.style.backgroundColor=t?.content?.backgroundColor||"#fff",n.setAttribute("key",e.id),n.style.cursor="pointer",n.addEventListener("click",(t=>{!1===this.isFetchingAds&&(this.tooltip&&"none"!==this.tooltip.style.display&&(this.tooltip.style.display="none"),this.showAdDetail(e))}));const o=(this.telegramUserId,document.createElement("div"));o.className="banner-link";const r=document.createElement("img");r.className="banner-image",r.src=e.adImageUrl,r.alt=e.alt;const i=document.createElement("div");i.className="banner-content-right",i.style.height="96px",i.style.display="flex",i.style.flexDirection="column",i.style.justifyContent="space-between";const s=document.createElement("div");s.className="banner-content",s.style.minHeight="60px";const a=document.createElement("div");a.className="banner-link-title",a.style.lineHeight="1em",a.style.color=t?.content?.appNameColor,a.textContent=e.alt;const l=document.createElement("div");l.className="banner-link-description",l.style.lineHeight="1.2em",l.style.color=t?.content?.appDescriptionColor,l.textContent=e.description;const c=document.createElement("div");c.style.position="relative",c.appendChild(l),s.appendChild(a),s.appendChild(c),i.appendChild(s);const d=document.createElement("div");return d.className="banner-link-btn",d.textContent=e.reward_info,d.style.backgroundColor=t?.button?.backgroundColor,d.style.color=t?.button?.textColor,d.style.marginTop="auto",t?.button?.backgroundColor&&(d.style.background="none",d.style.border="none",d.style.backgroundColor=t?.button?.backgroundColor),d.onmouseover=()=>{d.style.backgroundColor=t?.button?.highlightedBackgroundColor||"#000",d.style.color=t?.button?.highlightedTextColor},d.onmouseout=()=>{d.style.backgroundColor=t?.button?.backgroundColor||null,d.style.color=t?.button?.textColor},d.addEventListener("click",(t=>{t.stopPropagation(),this.telegramUserId?this.openLinkTelegram(e.bannerLink):window.open(e.bannerLink,"_blank"),this.onClickAdEvent(e)})),i.appendChild(d),o.appendChild(r),o.appendChild(i),n.appendChild(o),new MutationObserver(((t,n)=>{if(i.offsetWidth){n.disconnect(),console.log("ðŸš€ ~ BEC ~ renderAds ~ contentRight:",i.offsetWidth);const t=60;let o=i.offsetWidth-t;a.textContent=this.truncateStringToRowsWithFont(e.alt,1,o,null,16,"bold"),console.log("ðŸš€ ~ BEC ~ renderAds ~ containerWidth:",o),console.log("ðŸš€ ~ BEC ~ renderAds ~ title.textContent:",a.textContent),l.textContent=this.truncateStringToRowsWithFont(e.description,2,o,null,13,"normal"),console.log("ðŸš€ ~ BEC ~ renderAds ~ description.textContent:",l.textContent)}})).observe(document.body,{childList:!0,subtree:!0}),n}))}showAdDetail(e){const t=this.offerWallStyle,n=document.querySelector(".ads-list");n&&n.removeEventListener("scroll",this.scrollHandler);const o=document.querySelector(".info-icon");if(o){const e=document.createElement("div");e.className="back-icon",e.innerHTML='<svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <circle cx="24" cy="24" r="21" fill="#2196f3"/>\n                <path d="M27 12L15 24L27 36" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>\n            </svg>',e.style.cursor="pointer",e.onclick=()=>{const t=document.querySelector(".ad-detail-container");t&&(t.style.transform="translateX(100%)",setTimeout((()=>{t.remove(),n&&this.scrollHandler&&n.addEventListener("scroll",this.scrollHandler),e.parentNode.replaceChild(o,e),document.querySelectorAll(".banner-container").forEach((e=>{e.style.display=""}))}),300))},o.parentNode.replaceChild(e,o)}const r=document.createElement("div");r.className="ad-detail-container",r.style.backgroundColor="#fff",r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="calc(100vh - 56px)",r.style.marginTop="56px",r.style.transform="translateX(100%)",r.style.transition="transform 0.3s ease-in-out",r.style.overflowY="auto";const i=document.createElement("div");i.style.padding="16px",i.style.minHeight="100%",i.style.backgroundColor=t?.content?.backgroundColor||"#fff",i.style.boxSizing="border-box";const s=document.createElement("div");s.className="banner-link-title",s.style.display="flex",s.style.alignItems="flex-start",s.style.gap="12px",s.style.marginBottom="24px";const a=document.createElement("img");a.src=e.adImageUrl,a.alt=e.alt,a.className="banner-image";const l=document.createElement("div");l.className="banner-content",l.style.display="flex",l.style.flexDirection="column",l.style.flex="1",l.style.height="90px",l.style.justifyContent="space-between";const c=document.createElement("div");c.className="banner-title",c.textContent=e.alt,c.style.color=t?.content?.appNameColor;const d=document.createElement("button");d.textContent=e.reward_info,d.className="banner-link-btn",d.style.backgroundColor=t?.button?.backgroundColor,d.style.color=t?.button?.textColor,t?.button?.backgroundColor&&(d.style.background="none",d.style.border="none",d.style.backgroundColor=t?.button?.backgroundColor),d.onmouseover=()=>{d.style.backgroundColor=t?.button?.highlightedBackgroundColor||"#000"},d.onmouseout=()=>{d.style.backgroundColor=t?.button?.backgroundColor},d.onclick=()=>{this.telegramUserId?this.openLinkTelegram(e.bannerLink):window.open(e.bannerLink,"_blank"),this.onClickAdEvent(e)},l.appendChild(c),l.appendChild(d),s.appendChild(a),s.appendChild(l);const p=document.createElement("div");p.style.fontSize="18px",p.style.fontWeight="600",p.style.marginTop="20px",p.style.marginBottom="8px",p.style.color=t?.content?.appNameColor,p.textContent="App description";const m=document.createElement("div");m.className="banner-description",m.style.color=t?.content?.appDescriptionColor,m.style.lineHeight="1.2em",m.textContent=e.description;const h=document.createElement("div");h.style.fontSize="18px",h.style.fontWeight="600",h.style.marginTop="20px",h.style.marginBottom="8px",h.style.color=t?.content?.appNameColor,h.textContent="Reward description";const g=document.createElement("div");g.className="banner-description",g.style.color=t?.content?.appDescriptionColor,g.style.lineHeight="1.2em",g.textContent=e.rewardDesc,i.appendChild(s),i.appendChild(p),i.appendChild(m),i.appendChild(h),i.appendChild(g),r.appendChild(i),n&&(n.style.position="relative",n.appendChild(r),requestAnimationFrame((()=>{r.style.transform="translateX(0)",setTimeout((()=>{document.querySelectorAll(".banner-container").forEach((e=>{e.style.display="none"}))}),300)})))}renderOfferWall(e,t,n,o){if(e.inventory_type===f){const r=document.createElement("div");r.className="banner-offer-wall "+(o?"show":"");const i=document.createElement("div");i.className="banner-offer-overlay",r.appendChild(i);const s=document.createElement("div");s.className="offer-waller-container",o?(s.style.opacity="1",s.style.transform="scale(1)"):(s.style.opacity="0",s.style.transform="scale(0.8)"),s.id=`inventory${e?.id}`;const a=document.createElement("div");a.className="ads-list";const l=document.createElement("div");l.style.backgroundColor=this.offerWallStyle?.topBar?.backgroundColor||"#000",l.className="offer-header";const c=document.createElement("span");c.innerHTML='\n         <svg width="24" height="24" enable-background="new 0 0 48 48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="21" fill="#2196f3"/><g fill="#fff"><path d="m22 22h4v11h-4z"/><circle cx="24" cy="16.5" r="2.5"/></g></svg>\n         ',c.classList.add("info-icon"),this.tooltip=document.createElement("div"),this.tooltip.classList.add("tooltip-info"),this.tooltip.innerHTML=`\n         <div style="color: #fff; font-size: 14px; font-weight: bold; text-align: left; margin-bottom: 8px"> A Free Decentralized Audience Growth Engine </div>\n         <div style="color: #fff; font-size: 12px; text-align: left">At no cost, Web3 Traffic Exchange is a decentralized platform where projects get and spend tokens to exchange user traffic. Developers showcase their games to acquire tokens, then use these tokens to promote their own projects across the network. This fosters mutual growth in the Web3 ecosystem, allowing developers to increase their user base. </div>\n         ${this.sdkAppUrl?`<div style="margin-top: 10px;text-align: left;"><a href="${this.sdkAppUrl}" target="_blank" style="color: rgb(52, 152, 219); text-decoration: none">${this.sdkAppUrl}</a></div>`:""}\n         `,this.tooltip.style.display="none",l.appendChild(c),l.appendChild(this.tooltip),c.addEventListener("click",(()=>{this.tooltip.style.display="none"===this.tooltip.style.display?"block":"none"}));const d=document.createElement("div");d.className="header-title",d.textContent="Apps Network",d.style.color=this.offerWallStyle?.topBar?.textColor||"#fff",l.appendChild(d);const p=document.createElement("button");return p.className="close-button",p.innerHTML='\n          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">\n            <path d="M17.9999 5.99997C17.8124 5.8125 17.5581 5.70718 17.2929 5.70718C17.0278 5.70718 16.7735 5.8125 16.5859 5.99997L11.9999 10.586L7.41394 5.99997C7.22641 5.8125 6.9721 5.70718 6.70694 5.70718C6.44178 5.70718 6.18747 5.8125 5.99994 5.99997C5.81247 6.1875 5.70715 6.44181 5.70715 6.70697C5.70715 6.97213 5.81247 7.22644 5.99994 7.41397L10.5859 12L5.99994 16.586C5.81247 16.7735 5.70715 17.0278 5.70715 17.293C5.70715 17.5581 5.81247 17.8124 5.99994 18C6.18747 18.1874 6.44178 18.2928 6.70694 18.2928C6.9721 18.2928 7.22641 18.1874 7.41394 18L11.9999 13.414L16.5859 18C16.7735 18.1874 17.0278 18.2928 17.2929 18.2928C17.5581 18.2928 17.8124 18.1874 17.9999 18C18.1874 17.8124 18.2927 17.5581 18.2927 17.293C18.2927 17.0278 18.1874 16.7735 17.9999 16.586L13.4139 12L17.9999 7.41397C18.1874 7.22644 18.2927 6.97213 18.2927 6.70697C18.2927 6.44181 18.1874 6.1875 17.9999 5.99997Z" fill="white"/>\n          </svg>\n        ',p.style.color=this.offerWallStyle?.topBar?.textColor||"#fff",p.onclick=()=>n(this),l.appendChild(p),a.appendChild(l),this.renderAds(t,this.offerWallStyle).forEach((e=>a.appendChild(e))),this.addInfiniteScroll(a),s.appendChild(a),r.appendChild(s),r}}offerWall(){this.openOfferWall()}openOfferWall(){this.isVisibleOfferWallet=!0,this.initData()}closeOfferWall(e){e.isVisibleOfferWallet=!1,e.render()}openOfferWallChallenge(){this.isVisibleOfferWalletChallenge=!0,this.render()}closeOfferWallChallenge(e){e.isVisibleOfferWalletChallenge=!1,e.render()}confirmConversion=async e=>{try{let t={click_id:e?.click_id,action:e?.action||"PLAY",tui:e?.tui||this.userTelegramId};return await(async e=>{try{return await c(p.confirmConversion,{method:"POST",body:e})}catch(t){throw console.log(t,"error=>confirmConversion"),t}})(t)}catch(t){return console.log(t,"error=>confirmConversion"),"Error: Something went wrong"}};checkUserConversion=async e=>{try{let t=sessionStorage.getItem("dmtp_wallet_address");const n=decodeURIComponent(t);let o={wa:e?.wa||n};return(e?.offset||e?.limit)&&(o.offset=e?.offset,o.limit=e?.limit),(e?.tui||this.userTelegramId)&&(o.tui=e?.tui||this.userTelegramId),await(async e=>{try{return await c(p.checkUserConversion,{params:e,method:"GET"})}catch(t){throw console.log(t,"error=>checkUserConversion"),t}})(o)}catch(t){return console.log(t,"error=>checkUserConversion"),"Error: Something went wrong"}};resetInfiniteScroll(){this.hasMoreAds=!0,this.isFetchingAds=!1,this.inventoryCurrent=null,this.noDataCount=0,this.adsListShow=[]}sleep(e){return new Promise((t=>setTimeout(t,e)))}async fetchMoreAds(){this.noDataCount>3&&(this.hasMoreAds=!1);const e=document.createElement("div");e.className="spinner",e.innerHTML="\n            <img width=\"24\" height=\"24\" src=\"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xml:space='preserve'%20viewBox='0%200%20100%20100'%20y='0'%20x='0'%20xmlns='http://www.w3.org/2000/svg'%20id='åœ–å±¤_1'%20version='1.1'%20style='height:%20100%25;%20width:%20100%25;%20background:%20none;%20shape-rendering:%20auto;'%20width='200px'%20height='200px'%3e%3cg%20class='ldl-scale'%20style='transform-origin:%2050%25%2050%25;%20transform:%20rotate(0deg)%20scale(0.8,%200.8);'%3e%3cg%20class='ldl-ani'%3e%3cg%20class='ldl-layer'%3e%3cg%20class='ldl-ani'%20style='transform-origin:%2050px%2050px;%20transform:%20rotate(0deg);%20animation:%201.11111s%20linear%20-0.968519s%20infinite%20normal%20forwards%20running%20tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9;'%3e%3cpath%20stroke-miterlimit='10'%20stroke='%23333'%20stroke-width='3.5'%20fill='%23e0e0e0'%20d='M76.367%2043.448H23.633v40.233a5.267%205.267%200%200%200%205.267%205.267h42.2a5.267%205.267%200%200%200%205.267-5.267V43.448z'%20style='fill:%20rgb(224,%20224,%20224);%20stroke:%20rgb(51,%2051,%2051);'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cg%20class='ldl-layer'%3e%3cg%20class='ldl-ani'%20style='transform-origin:%2050px%2050px;%20transform:%20rotate(0deg);%20animation:%201.11111s%20linear%20-0.981481s%20infinite%20normal%20forwards%20running%20tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9;'%3e%3cpath%20stroke-miterlimit='10'%20stroke-width='3.5'%20stroke='%23000'%20opacity='.1'%20d='M67.867%2043.448v15.25H23.633v6.969h44.235v12.54c0%205.932-4.809%2010.741-10.741%2010.741H71.1a5.267%205.267%200%200%200%205.267-5.267V43.448h-8.5z'%20style=''%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cg%20class='ldl-layer'%3e%3cg%20class='ldl-ani'%20style='transform-origin:%2050px%2050px;%20transform:%20rotate(0deg);%20animation:%201.11111s%20linear%20-0.994444s%20infinite%20normal%20forwards%20running%20tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9;'%3e%3cpath%20stroke-miterlimit='10'%20stroke-width='3.5'%20stroke='%23333'%20fill='%23e15b64'%20d='M24.68%2011.434c-.087.029-.174.06-.26.093-1.641.626-3.224%205.227-4.183%206.886-1.024%201.772%203.906%206.538%2011.012%2010.646%206.77%203.913%2014.065%204.186%2015.359%203.124l3.022-5.228c.615-1.064-3.539-7.173-10.645-11.28-3.814-2.206-9.65-5.804-14.305-4.241z'%20style='fill:%20rgb(225,%2091,%20100);%20stroke:%20rgb(51,%2051,%2051);'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cg%20class='ldl-layer'%3e%3cg%20class='ldl-ani'%20style='transform-origin:%2050px%2050px;%20transform:%20rotate(0deg);%20animation:%201.11111s%20linear%20-1.00741s%20infinite%20normal%20forwards%20running%20tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9;'%3e%3cpath%20fill='%23333'%20d='M35.007%2022.057c4.29%202.48%206.648%206.427%206.648%206.427s-4.597-.073-8.887-2.553-7.266-5.357-6.648-6.427c.618-1.069%204.597.073%208.887%202.553z'%20style='fill:%20rgb(51,%2051,%2051);'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cg%20class='ldl-layer'%3e%3cg%20class='ldl-ani'%20style='transform-origin:%2050px%2050px;%20transform:%20rotate(0deg);%20animation:%201.11111s%20linear%20-1.02037s%20infinite%20normal%20forwards%20running%20tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9;'%3e%3cpath%20stroke-miterlimit='10'%20stroke-width='3.5'%20stroke='%23333'%20fill='%23e15b64'%20d='M75.32%2011.434c.087.029.174.06.26.093%201.641.626%203.224%205.227%204.183%206.886%201.024%201.772-3.906%206.538-11.012%2010.646-6.77%203.913-14.065%204.186-15.359%203.124l-3.022-5.228c-.615-1.064%203.539-7.173%2010.645-11.28%203.814-2.206%209.65-5.804%2014.305-4.241z'%20style='fill:%20rgb(225,%2091,%20100);%20stroke:%20rgb(51,%2051,%2051);'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cg%20class='ldl-layer'%3e%3cg%20class='ldl-ani'%20style='transform-origin:%2050px%2050px;%20transform:%20rotate(0deg);%20animation:%201.11111s%20linear%20-1.03333s%20infinite%20normal%20forwards%20running%20tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9;'%3e%3cpath%20fill='%23333'%20d='M64.993%2022.057c-4.29%202.48-6.648%206.427-6.648%206.427s4.597-.073%208.887-2.553%207.266-5.357%206.648-6.427-4.597.073-8.887%202.553z'%20style='fill:%20rgb(51,%2051,%2051);'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cg%20class='ldl-layer'%3e%3cg%20class='ldl-ani'%20style='transform-origin:%2050px%2050px;%20transform:%20rotate(0deg);%20animation:%201.11111s%20linear%20-1.0463s%20infinite%20normal%20forwards%20running%20tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9;'%3e%3cpath%20stroke-width='3.5'%20stroke='%23333'%20fill='%23fff'%20stroke-miterlimit='10'%20d='M80.425%2058.448h-60.85a3.425%203.425%200%200%201-3.425-3.425V35.874a3.425%203.425%200%200%201%203.425-3.425h60.851a3.425%203.425%200%200%201%203.425%203.425v19.149a3.425%203.425%200%200%201-3.426%203.425z'%20style='fill:%20rgb(255,%20255,%20255);%20stroke:%20rgb(51,%2051,%2051);'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cg%20class='ldl-layer'%3e%3cg%20class='ldl-ani'%20style='transform-origin:%2050px%2050px;%20transform:%20rotate(0deg);%20animation:%201.11111s%20linear%20-1.05926s%20infinite%20normal%20forwards%20running%20tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9;'%3e%3cpath%20stroke-miterlimit='10'%20stroke-width='3.5'%20stroke='%23000'%20opacity='.1'%20d='M80.425%2032.448H77.35v17.934a8.066%208.066%200%200%201-8.066%208.066h11.141a3.425%203.425%200%200%200%203.425-3.425V35.874a3.425%203.425%200%200%200-3.425-3.426z'%20style=''%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cg%20class='ldl-layer'%3e%3cg%20class='ldl-ani'%20style='transform-origin:%2050px%2050px;%20transform:%20rotate(0deg);%20animation:%201.11111s%20linear%20-1.07222s%20infinite%20normal%20forwards%20running%20tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9;'%3e%3cpath%20d='M41.5%2032.448h17v56.5h-17z'%20stroke-miterlimit='10'%20stroke-width='3.5'%20stroke='%23333'%20fill='%23e15b64'%20style='fill:%20rgb(225,%2091,%20100);%20stroke:%20rgb(51,%2051,%2051);'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cg%20class='ldl-layer'%3e%3cg%20class='ldl-ani'%20style='transform-origin:%2050px%2050px;%20transform:%20rotate(0deg);%20animation:%201.11111s%20linear%20-1.08519s%20infinite%20normal%20forwards%20running%20tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9;'%3e%3cpath%20d='M65.962%2051.583h10'%20stroke-miterlimit='10'%20stroke='%23333'%20stroke-width='3.5'%20stroke-linecap='round'%20fill='none'%20style='stroke:%20rgb(51,%2051,%2051);'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cg%20class='ldl-layer'%3e%3cg%20class='ldl-ani'%20style='transform-origin:%2050px%2050px;%20transform:%20rotate(0deg);%20animation:%201.11111s%20linear%20-1.09815s%20infinite%20normal%20forwards%20running%20tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9;'%3e%3cpath%20d='M50%2071v7'%20stroke-miterlimit='10'%20stroke='%23333'%20stroke-width='3.5'%20stroke-linecap='round'%20fill='none'%20style='stroke:%20rgb(51,%2051,%2051);'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cg%20class='ldl-layer'%3e%3cg%20class='ldl-ani'%20style='transform-origin:%2050px%2050px;%20transform:%20rotate(0deg);%20animation:%201.11111s%20linear%20-1.11111s%20infinite%20normal%20forwards%20running%20tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9;'%3e%3cpath%20d='M50%2041v19.698'%20stroke-miterlimit='10'%20stroke='%23333'%20stroke-width='3.5'%20stroke-linecap='round'%20fill='none'%20style='stroke:%20rgb(51,%2051,%2051);'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3cmetadata%20xmlns:d='https://loading.io/stock/'%3e%3cd:name%3egift%3c/d:name%3e%3cd:tags%3egift,present,giveaway,free,birthday,box,ribbon,souvenir,handsel,award,bonus,benefit%3c/d:tags%3e%3cd:license%3eby%3c/d:license%3e%3cd:slug%3epz39ku%3c/d:slug%3e%3c/metadata%3e%3c/g%3e%3c/g%3e%3cstyle%20id='tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9'%20data-anikit=''%3e@keyframes%20tick-d79b2b69-b128-409c-91d0-7a7d2d0cc9d9%20{%200%25%20{%20animation-timing-function:%20cubic-bezier(0.1858,0.2841,0.5834,1.4615);%20transform:%20rotate(0deg);%20}%2031%25%20{%20animation-timing-function:%20cubic-bezier(0.0467,0.1102,0.4803,1.4719);%20transform:%20rotate(6.093deg);%20}%2041%25%20{%20animation-timing-function:%20cubic-bezier(0.0469,0.1108,0.4775,1.4732);%20transform:%20rotate(-4.266deg);%20}%2051%25%20{%20animation-timing-function:%20cubic-bezier(0.0478,0.1131,0.4723,1.4819);%20transform:%20rotate(2.988deg);%20}%2061%25%20{%20animation-timing-function:%20cubic-bezier(0.0506,0.1192,0.4639,1.4818);%20transform:%20rotate(-2.088deg);%20}%2071%25%20{%20animation-timing-function:%20cubic-bezier(0.0581,0.1374,0.457,1.4901);%20transform:%20rotate(1.467deg);%20}%2081%25%20{%20animation-timing-function:%20cubic-bezier(0.0765,0.1813,0.4542,1.4923);%20transform:%20rotate(-1.026deg);%20}%2091%25%20{%20animation-timing-function:%20cubic-bezier(0.1747,0.3181,0.341,0.878);%20transform:%20rotate(0.72deg);%20}%20100%25%20{%20transform:%20rotate(-0.738deg);%20}%20}%3c/style%3e%3c!--%20[ldio]%20generated%20by%20https://loading.io/%20--%3e%3c/svg%3e\" alt=\"Loading\" class=\"loader\" />\n        ";const t=document.querySelector(".ads-list");t&&t.appendChild(e);try{if(!this.inventoryCurrent?.id)return console.error("Inventory ID is not set."),[];await this.sleep(1e3);let e=(await m(this.inventoryCurrent?.id,this.telegramUserId)).items||[];e=this.mapAdsList(e);const t=e.filter((e=>!this.adsListShow.some((t=>t.id===e.id))));return console.log("ðŸš€ ~ BEC ~ fetchMoreAds ~ uniqueAds:",t),t?.length>0?(this.adsListShow.push(...t),this.noDataCount=0):this.noDataCount++,console.log("ðŸš€ ~ BEC ~ fetchMoreAds ~  this.noDataCount:",this.noDataCount),console.log("ðŸš€ ~ BEC ~ fetchMoreAds ~ this.adsListShow:",this.adsListShow),this.renderAds(t,this.offerWallStyle)}catch(n){return console.error("Error fetching more ads:",n),[]}finally{t&&e&&t.removeChild(e)}}addInfiniteScroll(e){this.scrollHandler=(async()=>{const t=e.scrollTop,n=e.scrollHeight,o=e.clientHeight;try{if(t+o>=n-10&&!this.isFetchingAds&&this.hasMoreAds){this.isFetchingAds=!0;const t=await this.fetchMoreAds();t?.length>0&&t.forEach((t=>e.appendChild(t))),this.isFetchingAds=!1}}catch(r){console.error("Error adding infinite scroll:",r),this.isFetchingAds=!1}}).bind(this),e.addEventListener("scroll",this.scrollHandler)}render(){this.container.innerHTML="",this.inventoryBanners.forEach((e=>{const{ads:t,inventory:n}=e,o=document.createElement("div");if(o.setAttribute("key",n.id),"BNR"===n.inventory_type){const e=document.getElementById("exchangeBanner");if(!e)return;this.container=document.createElement("div"),this.container.className="becComponent",e.appendChild(this.container);const r=document.createElement("div");r.className="banner-exchange-code",r.style.width=`${n.size_width}px`,r.style.height=`${n.size_height}px`,r.className=`inventory-container ${n.location.toLowerCase()}`,r.id=`inventory${n.id}`,this.renderAds(t,this.bannerStyle).forEach((e=>r.appendChild(e))),o.appendChild(r)}if(n.inventory_type===f){const e=this.renderOfferWall(n,t,this.closeOfferWall,this.isVisibleOfferWallet);o.appendChild(e)}if("OWC"===n.inventory_type){const e=this.renderOfferWall(n,t,this.closeOfferWallChallenge,this.isVisibleOfferWalletChallenge);o.appendChild(e)}this.container.appendChild(o)}))}}},Symbol.toStringTag,{value:"Module"}))}));
